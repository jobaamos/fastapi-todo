<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Terawork Todo List</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Smooth transitions for theme */
    body {
      transition: background-color 0.6s ease, color 0.6s ease;
      background-color: #f9fafb;
      color: #1f2937;
      font-family: 'Poppins', sans-serif;
    }

    body.dark {
      background-color: #0f172a;
      color: #f1f5f9;
    }

    /* Glow animation on theme switch */
    .theme-glow {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at center, rgba(255, 255, 255, 0.25), transparent 70%);
      pointer-events: none;
      opacity: 0;
      animation: glow 0.7s ease;
    }

    @keyframes glow {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }

    /* Card styling */
    .todo-card {
      transition: all 0.3s ease-in-out;
      border-radius: 12px;
      padding: 1rem;
    }

    .todo-card:hover {
      transform: scale(1.03);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
    }

    .dark .todo-card {
      background-color: #1e293b;
      border: 1px solid #334155;
    }

    /* Input focus */
    input, textarea {
      transition: all 0.3s ease;
    }

    input:focus, textarea:focus {
      transform: scale(1.02);
      border-color: #2563eb;
      outline: none;
    }

    /* Responsive buttons below description */
    .todo-buttons {
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
      margin-top: 0.5rem;
    }

    @media (max-width: 640px) {
      .todo-buttons {
        justify-content: center;
      }
    }
  </style>

  <script>
    // Theme toggle + glow effect
    function toggleTheme() {
      const body = document.body;
      const isDark = body.classList.toggle("dark");

      // Add glow flash animation
      const glow = document.createElement("div");
      glow.className = "theme-glow";
      document.body.appendChild(glow);
      setTimeout(() => glow.remove(), 700);

      // Save preference
      localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    // Apply saved theme
    document.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") document.body.classList.add("dark");
      fetchTodos();
    });

    const API_URL = " https://fastapi-todo-gmjh.onrender.com"; // üîÅ

    async function fetchTodos() {
      const res = await fetch(API_URL);
      const todos = await res.json();
      const list = document.getElementById("todo-list");
      list.innerHTML = "";

      todos.forEach(todo => {
        const card = document.createElement("div");
        card.className = "todo-card bg-white dark:bg-gray-800 p-4 shadow-md";
        card.innerHTML = `
          <h3 class="text-lg font-semibold ${todo.is_completed ? 'line-through text-green-500' : ''}">${todo.title}</h3>
          <p class="text-sm">${todo.description}</p>
          <div class="todo-buttons">
            <button onclick="updateTodo(${todo.id}, ${!todo.is_completed})" class="bg-blue-500 text-white px-3 py-1 rounded hover:scale-105 transition-all">Undo</button>
            <button onclick="deleteTodo(${todo.id})" class="bg-red-500 text-white px-3 py-1 rounded hover:scale-105 transition-all">Delete</button>
          </div>
        `;
        list.appendChild(card);
      });
    }

    async function addTodo() {
      const title = document.getElementById("title").value;
      const description = document.getElementById("description").value;

      if (!title.trim()) return alert("Title cannot be empty");

      await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ title, description })
      });

      document.getElementById("title").value = "";
      document.getElementById("description").value = "";
      fetchTodos();
    }

    async function updateTodo(id, is_completed) {
      await fetch(`${API_URL}/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ is_completed })
      });
      fetchTodos();
    }

    async function deleteTodo(id) {
      await fetch(`${API_URL}/${id}`, { method: "DELETE" });
      fetchTodos();
    }
  </script>
</head>

<body class="min-h-screen flex flex-col items-center justify-start p-6">
  <!-- Header -->
  <header class="w-full flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-center text-blue-600 w-full">Terawork Todo List</h1>
    <button onclick="toggleTheme()" 
      class="absolute right-6 top-6 p-2 rounded-full bg-gray-200 dark:bg-gray-700 hover:rotate-180 transition-transform duration-500">
      üåô / ‚òÄÔ∏è
    </button>
  </header>

  <!-- Add Todo Form -->
  <div class="w-full max-w-lg bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg mb-8">
    <input id="title" type="text" placeholder="Enter Title" 
      class="w-full p-2 border border-gray-300 rounded-md mb-3 dark:bg-gray-700 dark:border-gray-600">
    <textarea id="description" rows="2" placeholder="Enter Description"
      class="w-full p-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600"></textarea>
    <button onclick="addTodo()" 
      class="w-full mt-3 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md transition-all hover:scale-105">
      ‚ûï Add Todo
    </button>
  </div>

  <!-- Todo List -->
  <div id="todo-list" class="w-full max-w-lg space-y-4"></div>
</body>
</html>



